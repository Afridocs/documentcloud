(function() {
  <% root = DC_CONFIG['server_root'] %>
  window.DV = window.DV || {};

  DV.onload = function() {
    /*@cc_on
    /*@if (@_jscript_version < 5.8)
      DV.api.loadCSS('<%= root %>/viewer/viewer.css');
    @else @*/
      DV.api.loadCSS('<%= root %>/viewer/viewer-datauri.css');
    /*@end
    @*/
    DV.api.loadCSS('<%= root %>/viewer/plainviewer.css');
  };

  DV.afterLoad = function() {
    $j('#DV-logoLink').attr({href : 'http://www.documentcloud.org'});
    var loc = window.location;
    var url = loc.protocol + '//' + loc.host + loc.pathname;
    var id  = parseInt(DV.Schema.document.id, 10);
    var key = encodeURIComponent(id + ':' + url);
    $j(document.body).append('<img alt="" width="1" height="1" src="<%= root %>/pixel.gif?key=' + key + '" />');
  };

  document.write('<script type="text/javascript" src="<%= root %>/viewer/viewer.js"></script>');
})();

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="ClearType" content="true" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title><%= @current_document && @current_document.title %></title>

  <!--[if (!IE)|(gte IE 8)]><!-->
    <link href="/viewer/viewer-datauri.css" media="screen" rel="stylesheet" type="text/css" />
  <!--<![endif]-->
  <!--[if lte IE 7]>
    <link href="/viewer/viewer.css" media="screen" rel="stylesheet" type="text/css" />
  <![endif]-->
  <link href="/viewer/plainviewer.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/viewer/printviewer.css" media="print" rel="stylesheet" type="text/css" />
  <%= render(:partial => 'viewer_editing') if @edits_enabled %>
  <script src="/viewer/viewer.js" type="text/javascript"></script>
</head>
<body style="margin:0; padding:0;">
  <div id="viewer"></div>
  <div id="overlay"></div>
  <script type="text/javascript">
    <% if @current_document %>
      window.currentDocument = DV.load(<%= @current_document.canonical({
        :account => @current_account, 
        :local => @local, 
        :annotation_author_names => @annotation_author_names,
        :allowed_to_edit => @allowed_to_edit
      }, {
        :container: '#viewer'
      }).to_json %>);
    <% end %>
  </script>
</body>
</html>